<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="../css/index.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Sofia"
    />
  </head>
  <body>
    <header>
      <img
        class="imgLogo"
        src="../img/HalteresSeusHabitosTopo.png"
        alt="HalteresSeusHabitos logo"
      />
      <address class="ender">
        Estrada do Puxa Ferro, 12 <br />
        Tel:(21)91234-5678 <br />
        contato@haltereshabit.com.br
      </address>
    </header>
    <nav>
      <ul>
        <li><a href="../index.html">Apresentação</a></li>
        <li><a href="./planos.html">Planos</a></li>
        <li><a href="./equipamentos.html">Equipamentos</a></li>
        <li><a href="">Inscrição</a></li>
      </ul>
    </nav>
    <section class="apres">
      <h1>Inscrição</h1>

      <form class="formul" id="form">
        <fieldset class="fsPessoal">
          <legend>Dados Pessoais</legend>
          <div class="linhaNome">
            <label class="labelDados" for="nome">Nome: </label>
            <input id="inpNome" type="text" name="nome" />
          </div>
          <div id="dadosPes">
            <label class="labelDados" for="telefone">Telefone: </label>
            <input
              onchange="verifyFixedNum(this.value)"
              type="text"
              class="inpTelef"
              name="telefone"
            /><br /><br />
            <label class="labelDados" for="celular">Celular:</label>
            <input
              onchange="verifyCelNum(this.value)"
              type="text"
              class="inpTelef"
              name="celular"
            /><br /><br />
            <label class="labelDados" for="idade">Idade:</label>
            <input
              type="number"
              id="inpIdade"
              class="numDD"
              name="idade"
              min="1"
              max="99"
            />
          </div>
          <fieldset class="fsGenero">
            <legend>Genero</legend>
            <input type="radio" id="masculino" name="genero" />
            <label for="masculino">Masculino</label><br />
            <input type="radio" id="feminino" name="genero" />
            <label for="feminino">Feminino</label><br />
            <input type="radio" id="outro" name="genero" />
            <label for="outro">Outro</label><br />
          </fieldset>
        </fieldset>
        <fieldset class="fsPessoal">
          <legend>Matrícula</legend>
          <div class="ColEsqPes">
            <label for="matriculado">Matrículado?</label>
            <input
              type="checkbox"
              id="matriculado"
              name="matriculado"
            /><br /><br />
            <label for="atividade">Atividade</label>
            <select name="atividade" id="atividade">
              <option value="">------</option>
              <option value="academia">Academia</option>
              <option value="natacao">Natação</option>
              <option value="combo">Combo</option>
            </select>
          </div>
          <div class="ColDirMat">
            <label for="numero">Número:</label>
            <input
              type="text"
              class="numQD"
              name="numero"
              id="numeroMat"
            /><br /><br />
            <label for="plano">Plano</label>
            <select name="plano" id="plano">
              <option value="">------</option>
              <option value="anual">Anual</option>
              <option value="semestral">Semestral</option>
              <option value="mensal">Mensal</option>
            </select>
          </div>
          <fieldset class="fsCartao">
            <legend>Cartão</legend>
            <label for="bandeira">Bandeira:</label>
            <input type="radio" id="visa" name="bandeira" />
            <label for="visa">Visa</label>
            <input type="radio" id="master" name="bandeira" />
            <label for="master">Master</label>
            <input type="radio" id="elo" name="bandeira" />
            <label for="elo">Elo</label><br />
            <label for="validade">Validade</label>
            <input type="number" class="numDD" id="validade" min="9" max="12" />
            /
            <input
              type="number"
              class="numQD"
              id="validade"
              min="2024"
              max="2040"
            /><br />
            <label for="numeroCC">Numero:</label>
            <input type="number" id="inpNCC" name="numeroCC" />
          </fieldset>
          <button
            type="button"
            onclick="calculatePlan(event)"
            class="btnMatPlan"
          >
            Matrícula+Plano
          </button>
          <div class="btnRight">
            <label for="valor">Valor: R$</label>
            <input type="number" id="inpVal" name="valor" />
          </div>
        </fieldset>
        <div class="entDireita">
          <button type="submit">Enviar</button>
          <button>Limpar</button>
        </div>
      </form>
    </section>
    <script>
      function verifyFixedNum(value) {
        if (value.length !== 8) {
          alert("Telefone tem de ter 8 digitos!");
        }

        const validPattern = /^[1-9]*$/;
        const invalidPattern = /[^1-9]/g;
        if (!validPattern.test(value)) {
          const invalidChars = value.match(invalidPattern);
          alert(
            `Telefone só pode ter digitos, caracter ${invalidChars} inválido!`
          );
        }
      }

      function verifyCelNum(value) {
        if (value.length !== 9) {
          alert("Telefone tem de ter 9 digitos!");
        }

        const validPattern = /^[1-9]*$/;
        const invalidPattern = /[^1-9]/g;
        if (!validPattern.test(value)) {
          const invalidChars = value.match(invalidPattern);
          alert(
            `Telefone só pode ter digitos, caracter ${invalidChars} inválido!`
          );
        }
      }

      function calculatePlan(e) {
        e.preventDefault();
        const atividade = document.getElementById("atividade").value;
        const plano = document.getElementById("plano").value;
        const matriculado = document.getElementById("matriculado").checked;
        const numeroMatricula = document.getElementById("numeroMat").value;

        const planos = {
          academia: {
            anual: 180,
            semestral: 220,
            mensal: 260,
          },
          natacao: {
            anual: 300,
            semestral: 340,
            mensal: 380,
          },
          combo: {
            anual: 330,
            semestral: 390,
            mensal: 440,
          },
        };

        if (!atividade) {
          alert("É necessário selecionar uma atividade!");
          return;
        } else if (!plano) {
          alert("É necessário selecionar um plano!");
          return;
        }

        console.log(matriculado);
        var taxa = 0;
        if (!matriculado || !numeroMatricula) {
          taxa = 80;
        }

        var total = 0;
        switch (plano) {
          case "anual":
            total = planos[atividade].anual * 12 + taxa;
            break;
          case "semestral":
            total = planos[atividade].semestral * 6 + taxa;
            break;
          case "mensal":
            total = planos[atividade].mensal + taxa;
        }
        console.log(`Valor total ${total}`);
        const valueInp = document.getElementById("inpVal");
        valueInp.value = total;
      }
    </script>
  </body>
</html>
